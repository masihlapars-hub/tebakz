    <!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tebak Tebakan - Kuis</title>
    <style>
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #6b8cbc;
            --accent-color: #ff6b6b;
            --background-color: #f5f7fa;
            --text-color: #333;
            --card-bg: #ffffff;
            --header-bg: #4a6fa5;
            --font-weight: bold;
        }

        /* Tema Gelap */
        .theme-dark {
            --primary-color: #2c3e50;
            --secondary-color: #34495e;
            --accent-color: #e74c3c;
            --background-color: #1a1a2e;
            --text-color: #ecf0f1;
            --card-bg: #16213e;
            --header-bg: #2c3e50;
        }

        /* Tema Terang */
        .theme-light {
            --primary-color: #4a6fa5;
            --secondary-color: #6b8cbc;
            --accent-color: #ff6b6b;
            --background-color: #f5f7fa;
            --text-color: #333;
            --card-bg: #ffffff;
            --header-bg: #4a6fa5;
        }

        /* Tema lainnya akan ditambahkan melalui JavaScript */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            font-weight: var(--font-weight);
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: var(--header-bg);
            color: white;
            padding: 15px 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        .nav-links a:hover {
            background-color: var(--secondary-color);
        }

        .page {
            display: none;
            padding: 20px;
            min-height: 80vh;
        }

        .page.active {
            display: block;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }

        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: bold;
        }

        .btn:hover {
            background-color: var(--secondary-color);
        }

        .btn-sm {
            padding: 8px 15px;
            font-size: 0.9rem;
            margin: 5px;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .category-item {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .category-item:hover {
            transform: translateY(-5px);
        }

        .category-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .level-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .question-container {
            margin-bottom: 20px;
        }

        .question-image {
            max-width: 100%;
            max-height: 300px;
            margin: 15px 0;
            border-radius: 8px;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option:hover {
            background-color: #f0f0f0;
            border-color: var(--primary-color);
        }

        .option.selected {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .result-item {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 8px;
        }

        .result-item.correct {
            background-color: #e8f5e9;
            border-left: 4px solid #4caf50;
        }

        .result-item.incorrect {
            background-color: #ffebee;
            border-left: 4px solid #f44336;
        }

        .progress-bar {
            height: 10px;
            background-color: #f0f0f0;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background-color: var(--primary-color);
            transition: width 0.3s;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .quiz-info {
            display: flex;
            gap: 20px;
        }

        /* Halaman Login */
        .login-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 70vh;
        }

        .avatar-selection {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
            justify-content: center;
        }

        .avatar-option {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s;
            object-fit: cover;
        }

        .avatar-option.selected {
            border-color: var(--primary-color);
            transform: scale(1.1);
        }

        .theme-selection {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
            justify-content: center;
        }

        .theme-option {
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            border: 2px solid var(--primary-color);
            transition: all 0.3s;
        }

        .theme-option.selected {
            background-color: var(--primary-color);
            color: white;
        }

        /* Halaman Admin */
        .admin-controls {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .admin-section {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: var(--card-bg);
            color: var(--text-color);
        }

        .item-list {
            margin-top: 15px;
            max-height: 200px;
            overflow-y: auto;
        }

        .list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }

        .list-item:last-child {
            border-bottom: none;
        }

        .delete-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
        }

        /* Modal Login Admin */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            width: 300px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .close {
            color: #aaa;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: var(--text-color);
        }

        /* Preview Gambar */
        .image-preview {
            max-width: 100%;
            max-height: 200px;
            margin-top: 10px;
            border-radius: 8px;
            display: none;
        }

        .upload-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
            display: inline-block;
        }

        .file-input {
            display: none;
        }

        @media (max-width: 768px) {
            .category-grid {
                grid-template-columns: 1fr;
            }
            
            .nav-links {
                flex-direction: column;
                gap: 10px;
            }
            
            .level-buttons {
                flex-direction: column;
            }
            
            .quiz-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .quiz-info {
                flex-direction: column;
                gap: 5px;
            }
            
            .admin-controls {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body class="theme-light">
    <header>
        <nav>
            <div class="logo">Tebak Tebakan</div>
            <div class="nav-links">
                <a href="#" id="home-link">Home</a>
                <a href="#" id="score-link">Top Score</a>
                <a href="#" id="admin-link">Admin</a>
                <a href="#" id="logout-link">Logout</a>
            </div>
        </nav>
    </header>

    <div class="container">
        <!-- Halaman Login -->
        <div id="login-page" class="page active">
            <div class="card">
                <div class="login-container">
                    <h2>Login Pemain</h2>
                    <div class="form-group">
                        <label for="player-name">Nama Pemain</label>
                        <input type="text" id="player-name" placeholder="Masukkan nama Anda">
                    </div>
                    
                    <h3>Pilih Avatar</h3>
                    <div class="avatar-selection" id="avatar-selection">
                        <!-- Avatar options will be populated by JavaScript -->
                    </div>
                    
                    <h3>Pilih Tema</h3>
                    <div class="theme-selection" id="theme-selection">
                        <!-- Theme options will be populated by JavaScript -->
                    </div>
                    
                    <button id="start-game-btn" class="btn">Mulai Bermain</button>
                </div>
            </div>
        </div>

        <!-- Halaman Home -->
        <div id="home-page" class="page">
            <div class="card">
                <h2>Selamat Datang di Tebak Tebakan, <span id="player-greeting">Pemain</span>!</h2>
                <p>Pilih kategori dan tingkat kesulitan untuk mulai bermain</p>
            </div>
            
            <div class="category-grid" id="category-grid">
                <!-- Categories will be populated by JavaScript -->
            </div>
        </div>

        <!-- Halaman Kuis -->
        <div id="quiz-page" class="page">
            <div class="card">
                <div class="quiz-header">
                    <h2 id="quiz-category">Kategori: </h2>
                    <div class="quiz-info">
                        <span id="quiz-level">Level: </span>
                        <span id="question-number">Soal 1/10</span>
                    </div>
                </div>
                
                <div class="progress-bar">
                    <div class="progress" id="quiz-progress" style="width: 0%"></div>
                </div>
                
                <div class="question-container">
                    <h3 id="question-text">Pertanyaan akan muncul di sini</h3>
                    <img id="question-image" class="question-image" style="display: none;">
                </div>
                
                <div class="options-container" id="options-container">
                    <!-- Opsi jawaban akan diisi melalui JavaScript -->
                </div>
                
                <button id="next-question-btn" class="btn" style="margin-top: 20px;">Selanjutnya</button>
            </div>
        </div>

        <!-- Halaman Hasil -->
        <div id="result-page" class="page">
            <div class="card">
                <h2>Hasil Kuis</h2>
                <p id="score-display">Skor Anda: </p>
                
                <h3>Detail Jawaban</h3>
                <div id="answer-details">
                    <!-- Detail jawaban akan diisi melalui JavaScript -->
                </div>
                
                <button id="back-to-home-btn" class="btn" style="margin-top: 20px;">Kembali ke Home</button>
            </div>
        </div>

        <!-- Halaman Admin -->
        <div id="admin-page" class="page">
            <div class="card">
                <h2>Panel Admin</h2>
                <p>Kelola soal, kategori, dan avatar dari sini</p>
            </div>
            
            <div class="admin-controls">
                <div class="admin-section">
                    <h3>Tambah Soal Baru</h3>
                    <div class="form-group">
                        <label for="question-category">Kategori</label>
                        <select id="question-category">
                            <!-- Categories will be populated by JavaScript -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="question-level">Level</label>
                        <select id="question-level">
                            <option value="mudah">Mudah</option>
                            <option value="normal">Normal</option>
                            <option value="sulit">Sulit</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="question-text">Pertanyaan</label>
                        <textarea id="question-text" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Gambar Soal (Opsional)</label>
                        <input type="file" id="question-image-upload" accept="image/*" class="file-input">
                        <label for="question-image-upload" class="upload-btn">Pilih Gambar</label>
                        <img id="question-image-preview" class="image-preview">
                    </div>
                    <div class="form-group">
                        <label for="option-a">Opsi A</label>
                        <input type="text" id="option-a">
                    </div>
                    <div class="form-group">
                        <label for="option-b">Opsi B</label>
                        <input type="text" id="option-b">
                    </div>
                    <div class="form-group">
                        <label for="option-c">Opsi C</label>
                        <input type="text" id="option-c">
                    </div>
                    <div class="form-group">
                        <label for="option-d">Opsi D</label>
                        <input type="text" id="option-d">
                    </div>
                    <div class="form-group">
                        <label for="correct-answer">Jawaban Benar</label>
                        <select id="correct-answer">
                            <option value="a">A</option>
                            <option value="b">B</option>
                            <option value="c">C</option>
                            <option value="d">D</option>
                        </select>
                    </div>
                    <button id="add-question-btn" class="btn">Tambah Soal</button>
                </div>
                
                <div class="admin-section">
                    <h3>Tambah Kategori Baru</h3>
                    <div class="form-group">
                        <label for="new-category-name">Nama Kategori</label>
                        <input type="text" id="new-category-name">
                    </div>
                    <div class="form-group">
                        <label for="new-category-desc">Deskripsi</label>
                        <input type="text" id="new-category-desc">
                    </div>
                    <div class="form-group">
                        <label>Gambar Kategori</label>
                        <input type="file" id="category-image-upload" accept="image/*" class="file-input">
                        <label for="category-image-upload" class="upload-btn">Pilih Gambar</label>
                        <img id="category-image-preview" class="image-preview">
                    </div>
                    <button id="add-category-btn" class="btn">Tambah Kategori</button>
                    
                    <h3 style="margin-top: 20px;">Daftar Kategori</h3>
                    <div class="item-list" id="category-list">
                        <!-- Categories will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="admin-section">
                    <h3>Tambah Avatar Baru</h3>
                    <div class="form-group">
                        <label>Upload Avatar</label>
                        <input type="file" id="avatar-upload" accept="image/*" class="file-input">
                        <label for="avatar-upload" class="upload-btn">Pilih Gambar</label>
                        <img id="avatar-preview" class="image-preview">
                    </div>
                    <button id="add-avatar-btn" class="btn">Tambah Avatar</button>
                    
                    <h3 style="margin-top: 20px;">Daftar Avatar</h3>
                    <div class="item-list" id="avatar-list">
                        <!-- Avatars will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Login Admin -->
    <div id="admin-login-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Login Admin</h3>
                <span class="close">&times;</span>
            </div>
            <div class="form-group">
                <label for="admin-password">Password</label>
                <input type="password" id="admin-password" placeholder="Masukkan password">
            </div>
            <button id="admin-login-btn" class="btn">Login</button>
        </div>
    </div>

    <script>
        // Data aplikasi
        const appData = {
            currentPlayer: {
                name: "Pemain",
                avatar: "",
                theme: "theme-light",
                score: 0
            },
            questions: [],
            currentQuestionIndex: 0,
            userAnswers: [],
            currentCategory: "",
            currentLevel: "",
            categories: [
                { id: "ipa", name: "IPA", description: "Ilmu Pengetahuan Alam", image: "" },
                { id: "ips", name: "IPS", description: "Ilmu Pengetahuan Sosial", image: "" },
                { id: "utbk", name: "UTBK", description: "Ujian Tulis Berbasis Komputer", image: "" },
                { id: "agama", name: "Agama", description: "Pendidikan Agama", image: "" },
                { id: "tebak-receh", name: "Tebak Receh", description: "Tebakan Receh", image: "" },
                { id: "cpns", name: "CPNS", description: "Tes CPNS", image: "" },
                { id: "logika", name: "Logika", description: "Tes Logika", image: "" }
            ],
            avatars: [
                "https://via.placeholder.com/60/4a6fa5/ffffff?text=A1",
                "https://via.placeholder.com/60/6b8cbc/ffffff?text=A2",
                "https://via.placeholder.com/60/ff6b6b/ffffff?text=A3",
                "https://via.placeholder.com/60/4caf50/ffffff?text=A4",
                "https://via.placeholder.com/60/9c27b0/ffffff?text=A5",
                "https://via.placeholder.com/60/ff9800/ffffff?text=A6",
                "https://via.placeholder.com/60/607d8b/ffffff?text=A7",
                "https://via.placeholder.com/60/795548/ffffff?text=A8",
                "https://via.placeholder.com/60/e91e63/ffffff?text=A9",
                "https://via.placeholder.com/60/009688/ffffff?text=A10"
            ],
            themes: [
                { id: "theme-light-1", name: "Terang 1", class: "theme-light" },
                { id: "theme-light-2", name: "Terang 2", class: "theme-light-2" },
                { id: "theme-light-3", name: "Terang 3", class: "theme-light-3" },
                { id: "theme-light-4", name: "Terang 4", class: "theme-light-4" },
                { id: "theme-dark-1", name: "Gelap 1", class: "theme-dark" },
                { id: "theme-dark-2", name: "Gelap 2", class: "theme-dark-2" },
                { id: "theme-dark-3", name: "Gelap 3", class: "theme-dark-3" },
                { id: "theme-dark-4", name: "Gelap 4", class: "theme-dark-4" }
            ],
            adminPassword: "281105",
            isAdminLoggedIn: false
        };

        // Contoh soal untuk berbagai kategori
        const sampleQuestions = {
            ipa: {
                mudah: [
                    {
                        id: 1,
                        question: "Apa yang dimaksud dengan fotosintesis?",
                        options: {
                            a: "Proses tanaman mengeluarkan cahaya",
                            b: "Proses tanaman menghasilkan makanan menggunakan cahaya matahari",
                            c: "Proses tanaman menghisap air",
                            d: "Proses tanaman menyerap karbon dioksida"
                        },
                        correctAnswer: "b",
                        image: ""
                    },
                    {
                        id: 2,
                        question: "Planet terdekat dari matahari adalah?",
                        options: {
                            a: "Venus",
                            b: "Bumi",
                            c: "Mars",
                            d: "Merkurius"
                        },
                        correctAnswer: "d",
                        image: ""
                    }
                ],
                normal: [
                    {
                        id: 1,
                        question: "Apa fungsi dari mitokondria?",
                        options: {
                            a: "Tempat fotosintesis",
                            b: "Pembangkit energi sel",
                            c: "Mengontrol aktivitas sel",
                            d: "Tempat sintesis protein"
                        },
                        correctAnswer: "b",
                        image: ""
                    }
                ],
                sulit: [
                    {
                        id: 1,
                        question: "Apa yang dimaksud dengan hukum termodinamika pertama?",
                        options: {
                            a: "Energi tidak dapat diciptakan atau dimusnahkan",
                            b: "Entropi selalu meningkat",
                            c: "Energi dapat diubah dari satu bentuk ke bentuk lain",
                            d: "Semua jawaban benar"
                        },
                        correctAnswer: "a",
                        image: ""
                    }
                ]
            },
            utbk: {
                mudah: [
                    {
                        id: 1,
                        question: "Apa singkatan dari UTBK?",
                        options: {
                            a: "Ujian Tulis Berbasis Komputer",
                            b: "Ujian Tes Bakat Kejuruan",
                            c: "Ujian Tahunan Berbasis Kelas",
                            d: "Ujian Tulis Berbasis Kertas"
                        },
                        correctAnswer: "a",
                        image: ""
                    }
                ],
                normal: [],
                sulit: []
            }
            // Tambahkan soal untuk kategori lainnya di sini
            // ...
        };

        // Inisialisasi aplikasi
        document.addEventListener('DOMContentLoaded', function() {
            // Setup tema tambahan
            setupAdditionalThemes();
            
            // Setup event listeners
            setupEventListeners();
            
            // Muat data dari localStorage jika ada
            loadFromLocalStorage();
            
            // Render pilihan avatar dan tema
            renderAvatarOptions();
            renderThemeOptions();
            renderCategoryOptions();
            renderCategoryList();
            renderAvatarList();
            renderCategories();
        });

        // Fungsi untuk setup tema tambahan
        function setupAdditionalThemes() {
            const style = document.createElement('style');
            style.textContent = `
                .theme-light-2 {
                    --primary-color: #6d4c41;
                    --secondary-color: #8d6e63;
                    --accent-color: #ff5722;
                    --background-color: #f5f5f5;
                    --text-color: #212121;
                    --card-bg: #ffffff;
                    --header-bg: #6d4c41;
                }
                
                .theme-light-3 {
                    --primary-color: #388e3c;
                    --secondary-color: #4caf50;
                    --accent-color: #ffc107;
                    --background-color: #e8f5e9;
                    --text-color: #1b5e20;
                    --card-bg: #ffffff;
                    --header-bg: #388e3c;
                }
                
                .theme-light-4 {
                    --primary-color: #1976d2;
                    --secondary-color: #2196f3;
                    --accent-color: #ff5252;
                    --background-color: #e3f2fd;
                    --text-color: #0d47a1;
                    --card-bg: #ffffff;
                    --header-bg: #1976d2;
                }
                
                .theme-dark-2 {
                    --primary-color: #7b1fa2;
                    --secondary-color: #9c27b0;
                    --accent-color: #ff4081;
                    --background-color: #1a1a1a;
                    --text-color: #e1bee7;
                    --card-bg: #2d2d2d;
                    --header-bg: #7b1fa2;
                }
                
                .theme-dark-3 {
                    --primary-color: #d32f2f;
                    --secondary-color: #f44336;
                    --accent-color: #ff9800;
                    --background-color: #1a1a1a;
                    --text-color: #ffcdd2;
                    --card-bg: #2d2d2d;
                    --header-bg: #d32f2f;
                }
                
                .theme-dark-4 {
                    --primary-color: #00796b;
                    --secondary-color: #009688;
                    --accent-color: #ffeb3b;
                    --background-color: #1a1a1a;
                    --text-color: #b2dfdb;
                    --card-bg: #2d2d2d;
                    --header-bg: #00796b;
                }
            `;
            document.head.appendChild(style);
        }

        // Fungsi untuk setup event listeners
        function setupEventListeners() {
            // Navigation
            document.getElementById('home-link').addEventListener('click', () => showPage('home-page'));
            document.getElementById('score-link').addEventListener('click', () => showPage('score-page'));
            document.getElementById('admin-link').addEventListener('click', showAdminPage);
            document.getElementById('logout-link').addEventListener('click', logout);
            
            // Login
            document.getElementById('start-game-btn').addEventListener('click', startGame);
            
            // Tombol level (akan ditambahkan setelah render categories)
            
            // Option selection
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('option')) {
                    document.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    e.target.classList.add('selected');
                    
                    // Simpan jawaban user
                    const currentIndex = appData.currentQuestionIndex;
                    appData.userAnswers[currentIndex] = e.target.dataset.option;
                }
            });
            
            // Next question
            document.getElementById('next-question-btn').addEventListener('click', handleNextQuestion);
            
            // Back to home
            document.getElementById('back-to-home-btn').addEventListener('click', () => {
                showPage('home-page');
            });
            
            // Admin functions
            document.getElementById('add-question-btn').addEventListener('click', addQuestion);
            document.getElementById('add-category-btn').addEventListener('click', addCategory);
            document.getElementById('add-avatar-btn').addEventListener('click', addAvatar);
            
            // Admin login
            document.getElementById('admin-login-btn').addEventListener('click', adminLogin);
            document.querySelector('.close').addEventListener('click', () => {
                document.getElementById('admin-login-modal').classList.remove('active');
            });
            
            // Image upload previews
            document.getElementById('question-image-upload').addEventListener('change', function(e) {
                handleImagePreview(e, 'question-image-preview');
            });
            
            document.getElementById('category-image-upload').addEventListener('change', function(e) {
                handleImagePreview(e, 'category-image-preview');
            });
            
            document.getElementById('avatar-upload').addEventListener('change', function(e) {
                handleImagePreview(e, 'avatar-preview');
            });
        }

        // Fungsi untuk menampilkan halaman tertentu
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
        }

        // Fungsi untuk menampilkan halaman admin dengan verifikasi password
        function showAdminPage() {
            if (appData.isAdminLoggedIn) {
                showPage('admin-page');
            } else {
                document.getElementById('admin-login-modal').classList.add('active');
            }
        }

        // Fungsi untuk login admin
        function adminLogin() {
            const password = document.getElementById('admin-password').value;
            if (password === appData.adminPassword) {
                appData.isAdminLoggedIn = true;
                document.getElementById('admin-login-modal').classList.remove('active');
                showPage('admin-page');
            } else {
                alert('Password salah!');
            }
        }

        // Fungsi untuk render pilihan avatar
        function renderAvatarOptions() {
            const container = document.getElementById('avatar-selection');
            container.innerHTML = '';
            
            appData.avatars.forEach((avatar, index) => {
                const avatarEl = document.createElement('img');
                avatarEl.src = avatar;
                avatarEl.alt = `Avatar ${index + 1}`;
                avatarEl.classList.add('avatar-option');
                avatarEl.dataset.avatar = avatar;
                
                if (index === 0) {
                    avatarEl.classList.add('selected');
                    appData.currentPlayer.avatar = avatar;
                }
                
                avatarEl.addEventListener('click', function() {
                    document.querySelectorAll('.avatar-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    appData.currentPlayer.avatar = this.dataset.avatar;
                });
                
                container.appendChild(avatarEl);
            });
        }

        // Fungsi untuk render pilihan tema
        function renderThemeOptions() {
            const container = document.getElementById('theme-selection');
            container.innerHTML = '';
            
            appData.themes.forEach((theme, index) => {
                const themeEl = document.createElement('div');
                themeEl.textContent = theme.name;
                themeEl.classList.add('theme-option');
                themeEl.dataset.theme = theme.class;
                
                if (index === 0) {
                    themeEl.classList.add('selected');
                }
                
                themeEl.addEventListener('click', function() {
                    document.querySelectorAll('.theme-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    
                    // Terapkan tema yang dipilih
                    document.body.classList.remove(...appData.themes.map(t => t.class));
                    document.body.classList.add(this.dataset.theme);
                    appData.currentPlayer.theme = this.dataset.theme;
                });
                
                container.appendChild(themeEl);
            });
        }

        // Fungsi untuk render pilihan kategori di admin
        function renderCategoryOptions() {
            const select = document.getElementById('question-category');
            select.innerHTML = '';
            
            appData.categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category.id;
                option.textContent = category.name;
                select.appendChild(option);
            });
        }

        // Fungsi untuk render daftar kategori di admin
        function renderCategoryList() {
            const container = document.getElementById('category-list');
            container.innerHTML = '';
            
            appData.categories.forEach(category => {
                const item = document.createElement('div');
                item.classList.add('list-item');
                
                const text = document.createElement('span');
                text.textContent = `${category.name} - ${category.description}`;
                
                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = 'Hapus';
                deleteBtn.classList.add('delete-btn');
                deleteBtn.addEventListener('click', () => deleteCategory(category.id));
                
                item.appendChild(text);
                item.appendChild(deleteBtn);
                container.appendChild(item);
            });
        }

        // Fungsi untuk render daftar avatar di admin
        function renderAvatarList() {
            const container = document.getElementById('avatar-list');
            container.innerHTML = '';
            
            appData.avatars.forEach((avatar, index) => {
                const item = document.createElement('div');
                item.classList.add('list-item');
                
                const img = document.createElement('img');
                img.src = avatar;
                img.alt = `Avatar ${index + 1}`;
                img.style.width = '30px';
                img.style.height = '30px';
                img.style.borderRadius = '50%';
                img.style.objectFit = 'cover';
                
                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = 'Hapus';
                deleteBtn.classList.add('delete-btn');
                deleteBtn.addEventListener('click', () => deleteAvatar(index));
                
                item.appendChild(img);
                item.appendChild(deleteBtn);
                container.appendChild(item);
            });
        }

        // Fungsi untuk render kategori di halaman home
        function renderCategories() {
            const container = document.getElementById('category-grid');
            container.innerHTML = '';
            
            appData.categories.forEach(category => {
                const categoryItem = document.createElement('div');
                categoryItem.classList.add('category-item');
                
                let categoryHTML = '';
                if (category.image) {
                    categoryHTML += `<img src="${category.image}" class="category-image" alt="${category.name}">`;
                }
                
                categoryHTML += `
                    <h3>${category.name}</h3>
                    <p>${category.description}</p>
                    <div class="level-buttons">
                        <button class="btn btn-sm" data-category="${category.id}" data-level="mudah">Mudah</button>
                        <button class="btn btn-sm" data-category="${category.id}" data-level="normal">Normal</button>
                        <button class="btn btn-sm" data-category="${category.id}" data-level="sulit">Sulit</button>
                    </div>
                `;
                
                categoryItem.innerHTML = categoryHTML;
                container.appendChild(categoryItem);
                
                // Add event listeners to level buttons
                categoryItem.querySelectorAll('.level-buttons button').forEach(button => {
                    button.addEventListener('click', function() {
                        const category = this.dataset.category;
                        const level = this.dataset.level;
                        startQuiz(category, level);
                    });
                });
            });
        }

        // Fungsi untuk memulai game setelah login
        function startGame() {
            const playerName = document.getElementById('player-name').value.trim();
            if (playerName) {
                appData.currentPlayer.name = playerName;
                document.getElementById('player-greeting').textContent = playerName;
                
                // Simpan data player
                saveToLocalStorage();
                
                showPage('home-page');
            } else {
                alert('Silakan masukkan nama Anda!');
            }
        }

        // Fungsi untuk memulai kuis
        function startQuiz(category, level) {
            // Reset data kuis
            appData.currentQuestionIndex = 0;
            appData.userAnswers = [];
            appData.currentCategory = category;
            appData.currentLevel = level;
            
            // Tentukan soal berdasarkan kategori dan level
            let questions = [];
            
            if (sampleQuestions[category] && sampleQuestions[category][level]) {
                questions = sampleQuestions[category][level];
            } else {
                // Jika tidak ada soal, buat contoh soal
                questions = [
                    {
                        id: 1,
                        question: `Contoh soal ${category} level ${level}`,
                        options: {
                            a: "Opsi A",
                            b: "Opsi B",
                            c: "Opsi C",
                            d: "Opsi D"
                        },
                        correctAnswer: "a",
                        image: ""
                    },
                    {
                        id: 2,
                        question: `Soal kedua ${category} level ${level}`,
                        options: {
                            a: "Opsi A",
                            b: "Opsi B",
                            c: "Opsi C",
                            d: "Opsi D"
                        },
                        correctAnswer: "b",
                        image: ""
                    }
                ];
            }
            
            // Update judul kuis
            document.getElementById('quiz-category').textContent = `Kategori: ${category.toUpperCase()}`;
            document.getElementById('quiz-level').textContent = `Level: ${level}`;
            
            // Simpan soal yang akan digunakan
            appData.currentQuestions = questions;
            
            // Tampilkan halaman kuis
            showPage('quiz-page');
            
            // Tampilkan soal pertama
            showQuestion(0);
        }

        // Fungsi untuk menampilkan soal
        function showQuestion(index) {
            if (index >= appData.currentQuestions.length) {
                finishQuiz();
                return;
            }
            
            const question = appData.currentQuestions[index];
            document.getElementById('question-text').textContent = question.question;
            document.getElementById('question-number').textContent = `Soal ${index + 1}/${appData.currentQuestions.length}`;
            
            // Tampilkan gambar jika ada
            const questionImage = document.getElementById('question-image');
            if (question.image) {
                questionImage.src = question.image;
                questionImage.style.display = 'block';
            } else {
                questionImage.style.display = 'none';
            }
            
            // Update progress bar
            const progressPercent = ((index) / appData.currentQuestions.length) * 100;
            document.getElementById('quiz-progress').style.width = `${progressPercent}%`;
            
            // Render opsi jawaban
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            
            for (const [key, value] of Object.entries(question.options)) {
                const optionEl = document.createElement('div');
                optionEl.classList.add('option');
                optionEl.dataset.option = key;
                optionEl.innerHTML = `<strong>${key.toUpperCase()}.</strong> ${value}`;
                optionsContainer.appendChild(optionEl);
            }
            
            // Reset seleksi jawaban
            if (appData.userAnswers[index]) {
                document.querySelectorAll('.option').forEach(opt => {
                    if (opt.dataset.option === appData.userAnswers[index]) {
                        opt.classList.add('selected');
                    }
                });
            }
        }

        // Fungsi untuk menangani pertanyaan berikutnya
        function handleNextQuestion() {
            if (!appData.userAnswers[appData.currentQuestionIndex]) {
                alert('Silakan pilih jawaban terlebih dahulu!');
                return;
            }
            
            appData.currentQuestionIndex++;
            showQuestion(appData.currentQuestionIndex);
        }

        // Fungsi untuk menyelesaikan kuis
        function finishQuiz() {
            // Hitung skor
            let score = 0;
            const answerDetails = [];
            
            for (let i = 0; i < appData.currentQuestions.length; i++) {
                const question = appData.currentQuestions[i];
                const userAnswer = appData.userAnswers[i];
                const isCorrect = userAnswer === question.correctAnswer;
                
                if (isCorrect) score++;
                
                answerDetails.push({
                    question: question.question,
                    userAnswer: userAnswer ? question.options[userAnswer] : "Tidak dijawab",
                    correctAnswer: question.options[question.correctAnswer],
                    isCorrect: isCorrect
                });
            }
            
            // Tampilkan skor
            appData.currentPlayer.score = score;
            document.getElementById('score-display').textContent = `Skor Anda: ${score}/${appData.currentQuestions.length}`;
            
            // Tampilkan detail jawaban
            const detailsContainer = document.getElementById('answer-details');
            detailsContainer.innerHTML = '';
            
            answerDetails.forEach((detail, index) => {
                const detailEl = document.createElement('div');
                detailEl.classList.add('result-item');
                detailEl.classList.add(detail.isCorrect ? 'correct' : 'incorrect');
                
                detailEl.innerHTML = `
                    <p><strong>Soal ${index + 1}:</strong> ${detail.question}</p>
                    <p><strong>Jawaban Anda:</strong> ${detail.userAnswer}</p>
                    <p><strong>Jawaban Benar:</strong> ${detail.correctAnswer}</p>
                `;
                
                detailsContainer.appendChild(detailEl);
            });
            
            // Tampilkan halaman hasil
            showPage('result-page');
            
            // Simpan skor
            saveToLocalStorage();
        }

        // Fungsi untuk preview gambar yang diupload
        function handleImagePreview(event, previewId) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById(previewId);
                    preview.src = e.target.result;
                    preview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        }

        // Fungsi untuk menambah soal
        function addQuestion() {
            const category = document.getElementById('question-category').value;
            const level = document.getElementById('question-level').value;
            const questionText = document.getElementById('question-text').value;
            const optionA = document.getElementById('option-a').value;
            const optionB = document.getElementById('option-b').value;
            const optionC = document.getElementById('option-c').value;
            const optionD = document.getElementById('option-d').value;
            const correctAnswer = document.getElementById('correct-answer').value;
            const questionImage = document.getElementById('question-image-preview').src;
            
            if (!category || !level || !questionText || !optionA || !optionB || !optionC || !optionD) {
                alert('Semua field harus diisi!');
                return;
            }
            
            // Buat objek soal baru
            const newQuestion = {
                id: Date.now(), // ID unik berdasarkan timestamp
                question: questionText,
                options: {
                    a: optionA,
                    b: optionB,
                    c: optionC,
                    d: optionD
                },
                correctAnswer: correctAnswer,
                image: questionImage.includes('data:image') ? questionImage : ""
            };
            
            // Inisialisasi jika belum ada
            if (!sampleQuestions[category]) {
                sampleQuestions[category] = {
                    mudah: [],
                    normal: [],
                    sulit: []
                };
            }
            
            if (!sampleQuestions[category][level]) {
                sampleQuestions[category][level] = [];
            }
            
            // Tambahkan soal
            sampleQuestions[category][level].push(newQuestion);
            
            // Reset form
            document.getElementById('question-text').value = '';
            document.getElementById('option-a').value = '';
            document.getElementById('option-b').value = '';
            document.getElementById('option-c').value = '';
            document.getElementById('option-d').value = '';
            document.getElementById('question-image-preview').style.display = 'none';
            document.getElementById('question-image-upload').value = '';
            
            alert('Soal berhasil ditambahkan!');
            
            // Simpan ke localStorage
            saveToLocalStorage();
        }

        // Fungsi untuk menambah kategori
        function addCategory() {
            const name = document.getElementById('new-category-name').value.trim();
            const description = document.getElementById('new-category-desc').value.trim();
            const categoryImage = document.getElementById('category-image-preview').src;
            
            if (!name || !description) {
                alert('Nama dan deskripsi kategori harus diisi!');
                return;
            }
            
            // Buat ID dari nama (lowercase, hapus spasi)
            const id = name.toLowerCase().replace(/\s+/g, '-');
            
            // Periksa apakah kategori sudah ada
            if (appData.categories.some(cat => cat.id === id)) {
                alert('Kategori sudah ada!');
                return;
            }
            
            // Tambahkan kategori
            appData.categories.push({
                id: id,
                name: name,
                description: description,
                image: categoryImage.includes('data:image') ? categoryImage : ""
            });
            
            // Reset form
            document.getElementById('new-category-name').value = '';
            document.getElementById('new-category-desc').value = '';
            document.getElementById('category-image-preview').style.display = 'none';
            document.getElementById('category-image-upload').value = '';
            
            // Perbarui UI
            renderCategoryOptions();
            renderCategoryList();
            renderCategories();
            
            alert('Kategori berhasil ditambahkan!');
            
            // Simpan ke localStorage
            saveToLocalStorage();
        }

        // Fungsi untuk menghapus kategori
        function deleteCategory(categoryId) {
            if (confirm('Apakah Anda yakin ingin menghapus kategori ini?')) {
                // Hapus kategori
                appData.categories = appData.categories.filter(cat => cat.id !== categoryId);
                
                // Hapus soal terkait
                delete sampleQuestions[categoryId];
                
                // Perbarui UI
                renderCategoryOptions();
                renderCategoryList();
                renderCategories();
                
                // Simpan ke localStorage
                saveToLocalStorage();
            }
        }

        // Fungsi untuk menambah avatar
        function addAvatar() {
            const avatarImage = document.getElementById('avatar-preview').src;
            
            if (!avatarImage || !avatarImage.includes('data:image')) {
                alert('Silakan upload gambar avatar!');
                return;
            }
            
            // Tambahkan avatar
            appData.avatars.push(avatarImage);
            
            // Reset form
            document.getElementById('avatar-preview').style.display = 'none';
            document.getElementById('avatar-upload').value = '';
            
            // Perbarui UI
            renderAvatarList();
            renderAvatarOptions();
            
            alert('Avatar berhasil ditambahkan!');
            
            // Simpan ke localStorage
            saveToLocalStorage();
        }

        // Fungsi untuk menghapus avatar
        function deleteAvatar(index) {
            if (confirm('Apakah Anda yakin ingin menghapus avatar ini?')) {
                // Hapus avatar
                appData.avatars.splice(index, 1);
                
                // Perbarui UI
                renderAvatarList();
                renderAvatarOptions();
                
                // Simpan ke localStorage
                saveToLocalStorage();
            }
        }

        // Fungsi untuk logout
        function logout() {
            if (confirm('Apakah Anda yakin ingin logout?')) {
                // Reset player data
                appData.currentPlayer = {
                    name: "Pemain",
                    avatar: "",
                    theme: "theme-light",
                    score: 0
                };
                
                // Reset admin login
                appData.isAdminLoggedIn = false;
                
                // Kembali ke halaman login
                showPage('login-page');
            }
        }

        // Fungsi untuk menyimpan data ke localStorage
        function saveToLocalStorage() {
            const dataToSave = {
                categories: appData.categories,
                avatars: appData.avatars,
                questions: sampleQuestions,
                player: appData.currentPlayer
            };
            
            localStorage.setItem('tebakTebakanData', JSON.stringify(dataToSave));
        }

        // Fungsi untuk memuat data dari localStorage
        function loadFromLocalStorage() {
            const savedData = localStorage.getItem('tebakTebakanData');
            
            if (savedData) {
                const parsedData = JSON.parse(savedData);
                
                if (parsedData.categories) {
                    appData.categories = parsedData.categories;
                }
                
                if (parsedData.avatars) {
                    appData.avatars = parsedData.avatars;
                }
                
                if (parsedData.questions) {
                    Object.assign(sampleQuestions, parsedData.questions);
                }
                
                if (parsedData.player) {
                    appData.currentPlayer = parsedData.player;
                    document.getElementById('player-name').value = appData.currentPlayer.name;
                    document.getElementById('player-greeting').textContent = appData.currentPlayer.name;
                    
                    // Terapkan tema yang disimpan
                    if (appData.currentPlayer.theme) {
                        document.body.classList.remove(...appData.themes.map(t => t.class));
                        document.body.classList.add(appData.currentPlayer.theme);
                        
                        // Tandai tema yang dipilih
                        document.querySelectorAll('.theme-option').forEach(opt => {
                            opt.classList.remove('selected');
                            if (opt.dataset.theme === appData.currentPlayer.theme) {
                                opt.classList.add('selected');
                            }
                        });
                    }
                    
                    // Tandai avatar yang dipilih
                    if (appData.currentPlayer.avatar) {
                        document.querySelectorAll('.avatar-option').forEach(opt => {
                            opt.classList.remove('selected');
                            if (opt.dataset.avatar === appData.currentPlayer.avatar) {
                                opt.classList.add('selected');
                            }
                        });
                    }
                }
            }
        }
    </script>
</body>
</html>
